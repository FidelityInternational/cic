#!/usr/bin/env bash

# Disable three shellcheck directives which don't apply for this script
# shellcheck disable=SC2129,SC2016,SC1090

# Our Pre-reqs 
sudo apt-get install -y git 

## Pyenv Pre-reqs *
#sudo apt-get install -y make build-essential libssl-dev zlib1g-dev libbz2-dev \
#  libreadline-dev libsqlite3-dev wget curl llvm libncurses5-dev libncursesw5-dev \
#  xz-utils tk-dev

# Rbenv pre-reqs 
sudo apt-get install autoconf bison build-essential libssl-dev libyaml-dev libreadline6-dev \
  zlib1g-dev libncurses5-dev libffi-dev libgdbm5 libgdbm-dev

# Docker setup
sudo apt-get -y install docker.io
sudo systemctl start docker
sudo systemctl enable docker
sudo usermod -aG docker "${USER}"

## Pyenv installation
#git clone https://github.com/pyenv/pyenv.git ~/.pyenv
#echo 'export PYENV_ROOT="$HOME/.pyenv"' >> ~/.bashrc
#echo 'export PATH="$PYENV_ROOT/bin:$PATH"' >> ~/.bashrc
#echo -e 'if command -v pyenv 1>/dev/null 2>&1; then\n  eval "$(pyenv init -)"\nfi' >> ~/.bashrc
#. ~/.bashrc
#pyenv install 2.7.13
#pyenv global 2.7.13
#pip install --upgrade pip
#pip install testinfra

# Rbenv installation
git clone https://github.com/rbenv/rbenv.git ~/.rbenv
echo 'export PATH="$HOME/.rbenv/bin:$PATH"' >> ~/.bashrc
echo 'eval "$(rbenv init -)"' >> ~/.bashrc
~/.rbenv/bin/rbenv init
. ~/.bashrc
mkdir -p "$(rbenv root)"/plugins
git clone https://github.com/rbenv/ruby-build.git "$(rbenv root)"/plugins/ruby-build
rbenv install 2.4.3
rbenv global 2.4.3
gem install bundler

echo "Now you MUST log out and back in again for the new group memberships to take effect. If you do not do this then Docker will not work correctly for you."


